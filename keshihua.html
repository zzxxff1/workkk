<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive ECharts</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"></script>
    <style>
        #main {
            width: 100%;
            height: 400px;
            background-color: white;
            clear: both;
        }
    </style>
</head>
<body>

<div id="main"></div>

<script>
    var chartDom = document.getElementById('main');
    var myChart = echarts.init(chartDom);
    var option;

    option = {
        xAxis: {
            type: 'category',
            data: ['20-29岁', '30-39岁', '40-49岁', '50-59岁', '60岁及以上'],
            axisLine: {show: false},
            axisTick: {show: false},
        },
        yAxis: {
            type: 'value',
            axisLine: {show: false},
            axisTick: {show: false},
            axisLabel: {show: false},
            splitLine: {show: false},
        },
        grid: {
            top: '5%',
            backgroundColor: '#f5f5f5'
        },
        series: [
            {
                data: [49.4, 61.2, 86.3, 95.3, 97.2],
                type: 'bar',
                position: 'center',
                showBackground: true,
                backgroundStyle: {
                    color: '#e8e8e8',
                    borderRadius: [15, 15, 15, 15]
                },
                barWidth: 30,
                itemStyle: {
                    borderRadius: [15, 15, 15, 15],
                    color: 'rgba(0, 102, 255, 0.7)',
                    borderColor: 'rgba(0, 102, 255, 0.7)',
                    borderWidth: 2
                },
                label: {
                    show: true,
                    position: 'top',
                    offset: [0, -10],
                    formatter: '{c}%'
                }
            }
        ]
    };

    function resizeChart() {
        var width = chartDom.clientWidth;
        option.series[0].barWidth = Math.min(width / 7, 50); // 最多显示7个柱子，柱子最大宽度为50
        myChart.setOption(option, true);
    }

    resizeChart();
    window.addEventListener('resize', resizeChart);

</script>

</body>
</html>
